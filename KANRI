
今週のミーティングで少し触れさせていただきましたが、指向性4の結果がインゴ様のものと私のものとで大きく食い違っている認識がございます。
正確に言えば、エクセルによる計算、インゴ様のもの、そして私のものと3つは全て異なっているという状態です。

原因がおそらく分かったのですが、
- エクセルによる計算ではパーセンタイルランクの計算方法が細かく選べない一方で、Pythonでは色々選べるから
- 連続量である指向性１の指標ではパーセンタイルランク関数の問題が顕在化しない一方で、ローデータが0か1しかない指向性4の指標ではローデータの重複が起こり、大きな差が出るから

エクセルによる計算はともかく、Pythonによる設定を統一する必要があると考えております（average, min, maxが主要候補）：https://pandas.pydata.org/docs/reference/api/pandas.Series.rank.html
この設定一つで指向性４の指標スコアが大きく変わり、ひいてはESGスコアで特にGスコア、及びSDGsスコア全体で大きく影響するため、非常に重要な問題であると認識しています。

私はこちらの関数ではmethodはデフォルト（average）にしておりましたが、結果的にはこのaverageが良いと考えております（後述）。
これに統一するということでもよろしいでしょうか。


例として、指向性4であるweb3.0の指標をエクセルに添付いたしました。
web3.0の指標のローデータは、1832社の中で118社が1、残りが０なのですが、ローデータ[0, 1]がどのように指標スコア今ピンクされるかを以下示します。
なお、インゴ様は0ー100点ベースを指標スコアを計算。私は0ー１点ベースで指標スコアを計算しておりますが、話の簡略化のため、0ー１点ベースに一致させます。


エクセル： [0.132, 0.978]

インゴ様：[0.123, 0.666]

さらに私の計算結果として３つ挙げます。

average : [0.288, 0.989]
min [0.132, 0.978]
max [0.444, 0.999]


エクセルとの整合性を考えればmin方式を採用してもいいのですが、これだと数値の開きが多いことや、
第三者への説明のしやすさという点で真ん中であるaverageに軍配が悪いということでaverageが良いと考えております



＋＋＋＋
これはPythonのパーセンタルランクの設定によるものだと思われます。

（エクセルの結果の半分はインゴ様のものと合致し残りの半分は私のものと合致しているという状態です）


従いましてどのように計算しているかをお教えいただくことは可能でしょうか。
ご参考までに各設定の結果をここに乗っけております
ご覧の通りminにしたらエクセル結果と合致するのですが、
